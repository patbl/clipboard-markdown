#!/usr/bin/env python3
import subprocess
import sys
from AppKit import NSPasteboard

# Read markdown from stdin
markdown = sys.stdin.read()

if not markdown:
    sys.exit(0)

# Convert markdown to HTML using pandoc
result = subprocess.run(
    ['pandoc', '-f', 'gfm', '-t', 'html'],
    input=markdown,
    capture_output=True,
    text=True
)

html = result.stdout

# Put HTML on clipboard using NSPasteboard
pasteboard = NSPasteboard.generalPasteboard()
pasteboard.clearContents()
pasteboard.setString_forType_(html, "public.html")
