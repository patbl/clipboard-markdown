#!/usr/bin/env python3
import subprocess
import sys
from AppKit import NSPasteboard

# Get HTML from clipboard using NSPasteboard
pasteboard = NSPasteboard.generalPasteboard()
html = pasteboard.stringForType_("public.html")

if not html:
    sys.exit(0)

# Convert HTML to markdown using pandoc
result = subprocess.run(
    ['pandoc', '-f', 'html', '-t', 'gfm-raw_html'],
    input=html,
    capture_output=True,
    text=True
)

print(result.stdout, end='')
